import{L as p,au as v,r as l,at as d,j as r,N as f,s as w,ae as h,S as C,h as b}from"./index-DXIXWoHh.js";import{A as u}from"./AdminLayout-B58-KujQ.js";import{T as x}from"./Table-CgQNlD3s.js";import{s as g}from"./index-kjwOohNt.js";import"./Container-WUJ_qu9L.js";import"./TextField-poyfljeC.js";import"./isMuiElement-r8vo_iCU.js";import"./Chip-Ddt6Sn-T.js";import"./MenuItem-CBV500-J.js";import"./InputAdornment-CJnrlikC.js";import"./Button-tIdt4f3V.js";const j=[{field:"id",headernamee:"ID",headerClassnamee:"table-header",width:200},{field:"avatar",headernamee:"Avatar",headerClassnamee:"table-header",width:150,renderCell:e=>r.jsx(h,{avatar:e.row.avatar})},{field:"namee",headernamee:"namee",headerClassnamee:"table-header",width:300},{field:"groupChat",headernamee:"Group Chat",headerClassnamee:"table-header",width:300},{field:"totalMembers",headernamee:"Total Members",headerClassnamee:"table-header",width:120},{field:"members",headernamee:"Members",headerClassnamee:"table-header",width:300,renderCell:e=>r.jsx(h,{max:100,avatar:e.row.members.map(a=>a.avatar)})},{field:"totalMessages",headernamee:"Total Messages",headerClassnamee:"table-header",width:120},{field:"creator",headernamee:"Created By",headerClassnamee:"table-header",width:250,renderCell:e=>r.jsxs(C,{direction:"row",alignItems:"center",spacing:"1rem",children:[r.jsx(b,{alt:e.row.creator.namee,src:e.row.creator.avatar}),r.jsx("span",{children:e.row.creator.namee})]})}],G=()=>{const{loading:e,data:a,error:m}=g({url:`${w}/api/v1/admin/chats`,key:"dashboard-chats",credentials:"include"});console.log("chatt",a),p([{isError:m,error:m}]),a==null||a.stats;const{id:A}=v(),[i,c]=l.useState([]);return l.useEffect(()=>{a&&c(a.chats.map(t=>{var o,n;return{...t,id:t._id,avatar:t.avatar.map(s=>d(s,50)),members:t.members.map(s=>({...s,avatar:d(s.avatar,50)})),creator:{namee:((o=t.creator)==null?void 0:o.namee)||"Unknown",avatar:d(((n=t.creator)==null?void 0:n.avatar)||"",50)}}}))},[a]),r.jsx(u,{children:e?r.jsx(f,{height:"100vh"}):r.jsx(x,{heading:"All Chats",columns:j,rows:i})})};export{G as default};
