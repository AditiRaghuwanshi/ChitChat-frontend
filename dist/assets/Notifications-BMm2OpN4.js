import{n as l,bs as g,e as j,_ as b,L as y,j as s,S as u,N,r as R,T as x,bt as d,h as w,bu as k}from"./index-DXIXWoHh.js";import{D as A,a as S}from"./DialogTitle-BS4nDxqb.js";import{L as I}from"./ListItem-B6K27DpV.js";import{B as p}from"./Button-tIdt4f3V.js";import"./isMuiElement-r8vo_iCU.js";const F=()=>{l(e=>e.auth.user);const{isNotification:r}=l(e=>e.misc),{isLoading:i,data:t,error:n,isError:o}=g(),a=j(),[c]=b(k),m=async({_id:e,accept:h})=>{a(d(!1)),await c("accepting friend request",{requestId:e,accept:h})},f=()=>{a(d(!1))};return y([{error:n,isError:o}]),console.log("Notifications Data:",t),s.jsx(A,{open:r,onClose:f,PaperProps:{sx:{background:"rgba(236, 227, 227, 0.97)",backdropFilter:"blur(10px)",boxShadow:"0 4px 30px rgba(0, 0, 0, 0.1)",borderRadius:"15px",padding:"2rem",border:"1px solid rgba(235, 231, 231, 0.97)"}},children:s.jsxs(u,{p:{xs:"1rem"},maxWidth:"25rem",children:[s.jsx(S,{children:"Notifications"}),i?s.jsx(N,{}):s.jsx(s.Fragment,{children:Array.isArray(t==null?void 0:t.allRequests)&&t.allRequests.length>0?t.allRequests.filter(e=>(e==null?void 0:e.sender)&&e.sender._id).map(e=>s.jsx(v,{sender:e.sender,_id:e._id.toString(),handler:m},e._id.toString())):s.jsx(x,{textAlign:"center",children:"0 Notifications"})})]})})},v=R.memo(({sender:r,_id:i,senderId:t,receiverId:n,handler:o})=>{const{namee:a,avatar:c}=r;return s.jsx(I,{children:s.jsxs(u,{direction:"row",alignItems:"center",spacing:"1rem",width:"100%",children:[s.jsx(w,{src:c}),s.jsx(x,{variant:"body1",sx:{flexGrow:1,overflow:"hidden",textOverflow:"ellipsis"},children:`${a||"Unknown"} has sent you a friend request`}),s.jsx(p,{onClick:()=>o({_id:i,senderId:r._id,accept:!0}),children:"Accept"}),s.jsx(p,{onClick:()=>o({_id:i,senderId:t,receiverId:n,accept:!1}),color:"error",children:"Reject"})]})})});export{F as default};
