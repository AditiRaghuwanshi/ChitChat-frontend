const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DeleteDialog-D2EH8d7R.js","assets/index-DXIXWoHh.js","assets/index-CZjT8u_K.css","assets/DialogTitle-BS4nDxqb.js","assets/Button-tIdt4f3V.js","assets/AddMember-DWMnId_b.js","assets/UserItem-DrW4Ry-J.js","assets/ListItem-B6K27DpV.js","assets/isMuiElement-r8vo_iCU.js"])))=>i.map(i=>d[i]);
import{d as b,j as e,Z as J,e as ee,n as se,_ as g,$ as re,a0 as ae,a1 as te,r as a,C as oe,a2 as ne,E as ie,L as ce,a3 as le,a4 as j,T as u,S as d,a5 as de,a6 as _,a7 as me,a8 as ue,B as pe,I as m,a9 as xe,q as he,aa as ge,ab as je,ac as z,ad as be,ae as fe,af as ve}from"./index-DXIXWoHh.js";import{U as Me}from"./UserItem-DrW4Ry-J.js";import{T as Ie}from"./TextField-poyfljeC.js";import{B as w}from"./Button-tIdt4f3V.js";import"./ListItem-B6K27DpV.js";import"./isMuiElement-r8vo_iCU.js";const ke=b(e.jsx("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"}),"Done"),De=b(e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),ye=b(e.jsx("path",{d:"M21 11H6.83l3.58-3.59L9 6l-6 6 6 6 1.41-1.41L6.83 13H21z"}),"KeyboardBackspace"),A=a.lazy(()=>z(()=>import("./DeleteDialog-D2EH8d7R.js"),__vite__mapDeps([0,1,2,3,4]))),Ce=a.lazy(()=>z(()=>import("./AddMember-DWMnId_b.js"),__vite__mapDeps([5,1,2,6,7,8,3,4]))),ze=()=>{var G,E,L,S;const r=J()[0].get("group"),n=ee(),{isAddMember:c}=se(s=>s.misc),[i,l]=g(re),[p,T]=g(ae),[R,Ee]=g(te),[F,f]=a.useState(!1),[H,x]=a.useState(!1),[P,V]=a.useState(!1),[v,M]=a.useState(""),[I,h]=a.useState(""),[O,k]=a.useState([]),D=oe(),t=ne(""),o=ie({chatId:r,populate:!0},{skip:!r}),y=()=>{V(!1)},U=()=>{n(ve(!0))},C=()=>{R("deleting group...",r),D("/"),y()},q=s=>{p("removing member",{chatId:r,userId:s})},K=[{isError:t.isError,error:t.error},{isError:o.isError,error:o.error}];ce(K),a.useEffect(()=>{const s=o.data;return s&&(M(s.chat.namee),h(s.chat.namee),k(s.chat.members)),()=>{M(""),h(""),k([]),x(!1)}},[o.data]);const N=()=>{D("/")},Q=()=>{f(s=>!s)},$=()=>{x(!1),i("updating group name",{chatId:r,namee:I})},W=()=>f(!1),X=e.jsxs(e.Fragment,{children:[e.jsx(pe,{sx:{display:{xs:"block",sm:"none",position:"fixed",right:"1rem",top:"1rem"}},children:e.jsx(m,{onClick:Q,children:e.jsx(xe,{})})}),e.jsx(he,{title:"Go Back",children:e.jsx(m,{sx:{position:"absolute",top:"2rem",left:"2rem",bgcolor:"bisque",color:"white",":hover":{bgcolor:"black"}},onClick:N,children:e.jsx(ye,{})})})]}),Y=e.jsx(d,{direction:"row",alignItems:"center",justifyContent:"center",spacing:"1rem",padding:"3rem",children:H?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{value:I,onChange:s=>h(s.target.value)}),e.jsx(m,{onClick:$,disabled:l,children:e.jsx(ke,{})})]}):e.jsxs(e.Fragment,{children:[e.jsx(u,{variant:"h4",align:"center",children:v}),e.jsx(m,{disabled:l,onClick:()=>x(!0),children:e.jsx(De,{})})]})}),Z=e.jsx(e.Fragment,{children:e.jsxs(d,{direction:{xs:"row-reverse",sm:"row"},spacing:"1rem",p:{xs:"0",sm:"1rem",md:" 1rem 4rem"},children:[e.jsx(w,{size:"large",color:"error",variant:"outlined",startIcon:e.jsx(ge,{}),onClick:C,children:" Delete Group "}),e.jsx(w,{size:"large",variant:"contained",startIcon:e.jsx(je,{}),onClick:U,children:" Add Member"})]})});return t.isLoading?e.jsx(le,{}):e.jsxs(j,{container:!0,height:"100vh",sx:{overflow:"hidden"},children:[e.jsx(j,{item:!0,sx:{display:{xs:"none",sm:"block"}},sm:4,children:e.jsx(B,{myGroups:(G=t==null?void 0:t.data)==null?void 0:G.groups,chatId:r})}),e.jsxs(j,{item:!0,xs:12,sm:8,sx:{display:"flex",flexDirection:"column",alignItems:"center",position:"relative",padding:"1rem 3rem"},children:[X,v&&e.jsxs(e.Fragment,{children:[Y,e.jsx(u,{margin:"2rem",alignSelf:"flex-start",variant:"body1",children:"Members"}),e.jsx(d,{maxWidth:"35rem",width:"100%",boxSizing:"border-box",padding:{sm:"1rem",xs:"0",md:"1rem 4rem"},spacing:"2rem",height:"50vh",overflow:"auto",children:T?e.jsx(de,{}):O.map(s=>e.jsx(Me,{user:s,isAdded:!0,styling:{boxShadow:"0 0 0.5rem rgba(0,0,0,0.2)",padding:"1rem 2rem",borderRadius:"1rem"},handler:q},s._id))}),Z]})]}),c&&e.jsx(a.Suspense,{fallback:e.jsx(_,{open:!0}),children:e.jsx(Ce,{chatId:r,groupMembers:((L=(E=o==null?void 0:o.data)==null?void 0:E.chat)==null?void 0:L.members)||[]})}),P&&e.jsx(a.Suspense,{fallback:e.jsx(_,{open:!0}),children:e.jsx(A,{open:A,handleClose:y,deleteHandler:C})}),e.jsx(me,{sx:{display:{xs:"block",sm:"none"}},open:F,onClose:W,children:e.jsx(B,{myGroups:(S=t==null?void 0:t.data)==null?void 0:S.groups,chatId:r,w:"50vw"})})]})},B=({w:r="100%",myGroups:n=[],chatId:c})=>e.jsx(d,{width:r,sx:{backgroundImage:ue,height:"100vh",overflowY:"auto",overflowX:"hidden",display:"flex",flexDirection:"column",justifyContent:"flex-start",padding:"0.5rem"},children:n.length>0?n.map(i=>e.jsx(Ge,{group:i,chatId:c},i._id)):e.jsx(u,{textAlign:"center",padding:"1rem",children:"No Groups To Display"})}),Ge=a.memo(({group:r,chatId:n})=>{const{namee:c,avatar:i,_id:l}=r;return e.jsx(be,{to:`?group=${l}`,onClick:p=>{n===l&&p.preventDefault()},children:e.jsxs(d,{direction:"row",spacing:"0.5rem",alignItems:"center",children:[e.jsx(fe,{avatar:i}),e.jsx(u,{children:c})]})})});export{ze as default};
