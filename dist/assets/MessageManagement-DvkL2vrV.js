import{L as c,r as h,x as f,at as p,j as r,N as g,s as w,z as u,B as x,S as C,h as b}from"./index-DXIXWoHh.js";import{A as j}from"./AdminLayout-B58-KujQ.js";import{T as A}from"./Table-CgQNlD3s.js";import{R as k}from"./RenderAttachment-DySlwRn-.js";import{s as v}from"./index-kjwOohNt.js";import"./Container-WUJ_qu9L.js";import"./TextField-poyfljeC.js";import"./isMuiElement-r8vo_iCU.js";import"./Chip-Ddt6Sn-T.js";import"./MenuItem-CBV500-J.js";import"./InputAdornment-CJnrlikC.js";import"./Button-tIdt4f3V.js";const M=[{field:"id",headernamee:"ID",headerClassnamee:"table-header",width:200},{field:"attachments",headernamee:"Attachments",headerClassnamee:"table-header",width:200,renderCell:s=>{const{attachments:e}=s.row;return(e==null?void 0:e.length)>0?e.map(t=>{const n=t.url;console.log("whats in it",t);const d=u(n);return r.jsx(x,{children:r.jsx("a",{href:n,download:!0,target:"_blank",style:{color:"black"},children:k(d,n)})})}):"No Attachments"}},{field:"content",headernamee:"Content",headerClassnamee:"table-header",width:400},{field:"sender",headernamee:"Sent By",headerClassnamee:"table-header",width:200,renderCell:s=>r.jsxs(C,{direction:"row",spacing:"1rem",alignItems:"center",children:[r.jsx(b,{alt:s.row.sender.namee,src:s.row.sender.avatar}),r.jsx("span",{children:s.row.sender.namee})]})},{field:"chat",headernamee:"Chat",headerClassnamee:"table-header",width:220},{field:"groupChat",headernamee:"Group Chat",headerClassnamee:"table-header",width:100},{field:"createdAt",headernamee:"Time",headerClassnamee:"table-header",width:250}],z=()=>{const{loading:s,data:e,error:t}=v({url:`${w}/api/v1/admin/messages`,key:"dashboard-messages",credentials:"include"});c([{isError:t,error:t}]);const[n,d]=h.useState([]);return h.useEffect(()=>{var o;if((o=e==null?void 0:e.messages)!=null&&o.length){const i=e.messages.filter(a=>a&&a._id).map(a=>{var l,m;return{...a,id:a._id,sender:{namee:((l=a.sender)==null?void 0:l.namee)||"Unknown",avatar:p(((m=a.sender)==null?void 0:m.avatar)||"",50)},createdAt:f(a.CreatedAt).format("MMMM Do YYYY, h:mm:ss a")}});d(i)}},[e]),r.jsx(j,{children:s?r.jsx(g,{height:"100vh"}):r.jsx(A,{heading:"All Messages",columns:M,rows:n,rowHeight:200})})};export{z as default};
