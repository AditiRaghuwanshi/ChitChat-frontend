import{e as C,n as u,bv as E,r as b,_ as D,bE as U,L as F,j as s,S as o,N as H,T as L,af as T}from"./index-DXIXWoHh.js";import{U as B}from"./UserItem-DrW4Ry-J.js";import{D as I,a as N}from"./DialogTitle-BS4nDxqb.js";import{B as p}from"./Button-tIdt4f3V.js";import"./ListItem-B6K27DpV.js";import"./isMuiElement-r8vo_iCU.js";const G=[{avatar:["https://www.w3schools.com/howto/img_avatar.png"],namee:"priyansh",_id:"2"},{avatar:["https://img.freepik.com/free-psd/3d-illustration-with-online-avatar_23-2151303097.jpg?t=st=1742717835~exp=1742721435~hmac=56a732645bba652afa7d41d81d37e567515b68f4f7580aaba5afbf3ce899cbcb&w=826"],namee:"aditi",_id:"1"}],P=({chatId:t,groupMembers:h=[]})=>{var m;const f=C(),{isAddMember:g}=u(e=>e.misc),{isError:x,isLoading:M,error:j,data:n}=E(t),[Q,y]=b.useState(G),[d,c]=b.useState([]),[w,A]=D(U),_=e=>{c(a=>a.includes(e)?a.filter(r=>r!==e):[...a,e])},S=async()=>{var a,r;const e=await w("adding members",{members:d,chatId:t});console.log("chatid konsi?",t),((r=(a=e==null?void 0:e.data)==null?void 0:a.alreadyExists)==null?void 0:r.length)>0?toast.info("Some users were already in the group"):toast.success("Members added successfully"),i(),console.log("addMembers response",e)},i=()=>{f(T(!1)),c([]),y([])},v=h.map(e=>e._id),k=u(e=>e.auth.user._id),l=((m=n==null?void 0:n.friends)==null?void 0:m.filter(e=>e._id!==k&&!v.includes(e._id)))||[];return F([{isError:x,error:j}]),s.jsx(I,{open:g,onClose:i,children:s.jsxs(o,{p:"1rem",width:"19rem",spacing:"1rem",children:[s.jsx(N,{textAlign:"center",children:"Add Member"}),s.jsx(o,{spacing:"1rem",children:M?s.jsx(H,{}):l.length>0?l.map(e=>s.jsx(B,{user:e,handler:_,isAdded:d.includes(e._id)},e._id)):s.jsx(L,{textAlign:"center",children:"No friends to add"})}),s.jsxs(o,{direction:"row",justifyContent:"space-evenly",alignItems:"center",children:[s.jsx(p,{color:"error",onClick:i,children:"Cancel"}),s.jsx(p,{onClick:S,variant:"contained",disabled:A,children:" Submit Changes"})]})]})})};export{P as default};
